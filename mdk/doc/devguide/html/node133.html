<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Patching parted</TITLE>
<META NAME="description" CONTENT="Patching parted">
<META NAME="keywords" CONTENT="devguide">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="devguide.css">

<LINK REL="next" HREF="node134.html">
<LINK REL="previous" HREF="node132.html">
<LINK REL="up" HREF="node132.html">
<LINK REL="next" HREF="node134.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html3870"
  HREF="node134.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html3866"
  HREF="node132.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html3860"
  HREF="node132.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html3868"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html3871"
  HREF="node134.html">Compiling</A>
<B> Up:</B> <A NAME="tex2html3867"
  HREF="node132.html">parted</A>
<B> Previous:</B> <A NAME="tex2html3861"
  HREF="node132.html">parted</A>
 &nbsp; <B>  <A NAME="tex2html3869"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00781000000000000000">
Patching parted</A>
</H2>
The measurement has to be set to megabyte to get an accurate output of partition and harddisk sizes. This is done by the following patch:
<PRE>
diff -r ./libparted/exception.c ../parted-1.8.7/libparted/exception.c
131,145c131,145
&lt; //    if (e-&gt;type == PED_EXCEPTION_BUG)
&lt; //            fprintf (stderr,
&lt; //                    _("A bug has been detected in GNU Parted.  "
&lt; //                    "Refer to the web site of parted "
&lt; //                    "http://www.gnu.org/software/parted/parted.html "
&lt; //                    "for more informations of what could be useful "
&lt; //                    "for bug submitting!  "
&lt; //                    "Please email a bug report to "
&lt; //                    "bug-parted@gnu.org containing at least the "
&lt; //                    "version (%s) and the following message:  "),
&lt; //                    VERSION);
&lt; //    else
&lt; //            fprintf (stderr, "%s: ",
&lt; //                     ped_exception_get_type_string (e-&gt;type));
&lt; //    fprintf (stderr, "%s\n", e-&gt;message);
---
&gt;       if (e-&gt;type == PED_EXCEPTION_BUG)
&gt;               fprintf (stderr,
&gt;                       _("A bug has been detected in GNU Parted.  "
&gt;                       "Refer to the web site of parted "
&gt;                       "http://www.gnu.org/software/parted/parted.html "
&gt;                       "for more informations of what could be useful "
&gt;                       "for bug submitting!  "
&gt;                       "Please email a bug report to "
&gt;                       "bug-parted@gnu.org containing at least the "
&gt;                       "version (%s) and the following message:  "),
&gt;                       VERSION);
&gt;       else
&gt;               fprintf (stderr, "%s: ",
&gt;                        ped_exception_get_type_string (e-&gt;type));
&gt;       fprintf (stderr, "%s\n", e-&gt;message);
diff -r ./libparted/unit.c ../parted-1.8.7/libparted/unit.c
70c70
&lt; static PedUnit default_unit = PED_UNIT_MEGABYTE;
---
&gt; static PedUnit default_unit = PED_UNIT_COMPACT;
</PRE>

<P>
<BR><HR>
<ADDRESS>
root
2013-08-18
</ADDRESS>
</BODY>
</HTML>
